---
slug: jns-bridge
title: 赏金任务：JNS跨链桥开发
authors: [devguild]
tags: [jnsdao, bridge]
---

## 一、背景

>  最近JNS社区出现了一些诉求：希望将JNS从元码链跨到以太坊生态去；为了能够快速的验证这种诉求的合理性，我们先行采用人工桥的方式，在两条链上进行JNS的转移；待诉求的合理性经过充分验证后，可以采用更加去中心化的跨链方案；

## 二、人工桥的思路概述

1. JNS从元码链跨到以太坊生态

    > 1. 用户联系JNS DAO技术公会，提出跨链诉求；
    > 2. 用户先行将jns转入一个支持NFT资产的多签合约地址；该多签合约由JNS DAO进行部署及管理；
    > 3. JNS DAO技术公会确认用户jns转入后，由技术公会的两把私钥对三元组数据 [jns, jns-owner-address, timelock] 分别进行签名, 得到sign1和sign2;
    > 4. JNS DAO技术公会将步骤3中生成的sign1和sign2, 提供给用户;
    > 5. **在相同的地址钱包下**，用户切换至以太坊网络，在跨链页面填入上述两个签名值及jns, 即可自行铸造相同的jns(jns将会下发到当前钱包地址下)；

2. JNS从以太坊生态跨回到元码链

    > 1. 用户联系JNS DAO技术公会，提出跨回元码链诉求；
    > 2. 用户先行将jns资产，在以太坊生态燃烧销毁；
    > 3. JNS DAO技术公会，确认用户已经在以太坊生态销毁jns后，将相应的jns从多签合约地址转出至用户地址；

## 三、已有的源码

> 1. JNS合约
> 2. 多签钱包合约

## 四、待开发的内容点

1. 将JNS合约扩展出burn的能力

    > 1. 新增burn对外接口；nft owner可以自主销毁自己的jns，不可以销毁非owner的jns资产；
    > 2. 待销毁的jns必须是unbind状态，否则无法销毁；
    > 3. 针对销毁的jns，要在合约内记录该nft的owner及销毁区块高度；

2. 将JNS的mint接口，扩展出鉴权能力
    > 1. 基于domain separator;  且
    > 2. 基于[jns, jns-owner-address, timelock]的两份签名; 且
    > 3. 基于mint接口选择器;

3. 扩展多签钱包合约，使其支持NFT资产

    > 1. 不可以破坏掉已有的原生资产多签能力；
    > 2. 不可以破坏合约已有的安全性；
    > 3. 新增针对NFT的发起 “资产转移” 接口；
    > 4. 新增针对NFT的签名“资产转移” 接口；签名内容是[jns, jns-owner-address, timelock]三元组，并将签名结果写入mapping;

4. 用户铸造/销毁页面
    > 2. JNS铸造页面，提供4个输入框([timelock, sign1, sign2, jns])给用户，可以正确触发metamask钱包，完成对合约的铸造调用；
    > 3. JNS销毁页面，提供一个输入框(jns)给用户，可以正确触发metamask钱包，完成对合约的销毁调用；

5. 用户多签钱包页面
   > 1. 发起资产转移页面，提供两个输入框([jns, receiver]), 可以正确触发metamask钱包，完成对资产转移接口的调用；
   > 2. 签名资产转移页面，提供三个输入框([jns,jns-owner-address, timelock]), 可以正确触发metamask钱包，完成对签名接口的调用；
   > 3. 查询，提供三个输入框([jns,jns-owner-address, timelock]), 可以正确触发metamask钱包，完成对签名结果的查询；

## 五、交付物
> 1. 合约两本，分别是上述的JNS扩展合约和扩展的多签合约钱包；
> 2. 完备的前端工程项目，react及vue可以自选；



## 六、验收
**请先自行测试无误后再提交验收**

1. 扩展的JNS合约在以太坊链上部署、工作正常，符合设计要求，无安全隐患。
2. 扩展的多签钱包合约在元码链上部署、工作正常，符合设计要求，无安全隐患。
3. 跨链全流程闭环准确无误，符合设计要求。

## 七、赏金 

> 工作量预估：20个有效工作小时 (约合4个标准工作日)
>
> 赏金预算：20个JNS白名单（凭白名单享一元自由购）

